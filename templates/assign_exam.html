{% extends "base.html" %}

{% block title %}Assign Exam - Online Exam Portal{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div style="margin-bottom: 1rem;">
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>
    
    <div class="dashboard-header">
        <h1 style="font-size: 2rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">
            <i class="fas fa-user-check"></i> Assign Exam to User
        </h1>
        <p style="color: #6b7280;">Grant exam access to users with time restrictions</p>
    </div>

    <div class="card glass-morphism" style="max-width: 700px; margin: 0 auto;">
        <form method="POST" action="{{ url_for('assign_exam') }}">
            <div class="form-group">
                <label class="form-label">
                    <i class="fas fa-user"></i> Select User
                </label>
                <select name="user_id" class="form-control" required>
                    <option value="">Choose a user...</option>
                    {% for user in users %}
                    <option value="{{ user.id }}">{{ user.username }} ({{ user.email }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <i class="fas fa-file-alt"></i> Select Exam
                </label>
                <select name="exam_id" class="form-control" required>
                    <option value="">Choose an exam...</option>
                    {% for exam in exams %}
                    <option value="{{ exam.id }}">{{ exam.title }} ({{ exam.duration_minutes }} mins, {{ exam.questions|length }} questions)</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <i class="fas fa-calendar-plus"></i> Start Time
                </label>
                <input type="datetime-local" name="start_time" class="form-control" required>
                <small style="color: #6b7280; display: block; margin-top: 0.5rem;">
                    When the exam becomes available
                </small>
            </div>

            <div class="form-group">
                <label class="form-label">
                    <i class="fas fa-calendar-times"></i> End Time
                </label>
                <input type="datetime-local" name="end_time" class="form-control" required>
                <small style="color: #6b7280; display: block; margin-top: 0.5rem;">
                    Deadline for starting the exam
                </small>
            </div>

            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-check"></i> Assign Exam
                </button>
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>

        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e5e7eb;">
            <div style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 1rem; border-radius: 12px;">
                <p style="color: #92400e; margin: 0;">
                    <i class="fas fa-exclamation-triangle"></i> <strong>Important:</strong> 
                    The user will receive an email notification with exam details and access period.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}